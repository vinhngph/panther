!function(){"use strict";const e=async e=>{const t=Array.from(e.querySelectorAll("img")).map(e=>e.complete?Promise.resolve():new Promise(t=>{const n=()=>{e.removeEventListener("load",n),e.removeEventListener("error",n),t()};e.addEventListener("load",n,{once:!0}),e.addEventListener("error",n,{once:!0})}));await Promise.all([...t]),await new Promise(requestAnimationFrame)};const t=e=>{const t=document.createElement("div");return Object.assign(t.style,{fontFamily:"sans-serif",position:"fixed",top:"20px",right:"20px",backgroundColor:"#FF5722",color:"white",padding:"15px",borderRadius:"5px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",opacity:"1",transition:"opacity 0.5s ease",fontSize:"20px",zIndex:"9999"}),document.body.appendChild(t),{setProgress:n=>{if(n===e)return t.remove();t.textContent=`Scanning: ${n}/${e}`}}},n=()=>{const e=document.getElementById("page-container-wrapper")?.childNodes[0]?.childNodes[0]?.childNodes[0];if(!e)return;const t=e=>{const t=document.createElement("div");t.style.width="100mm",t.style.position="absolute",t.style.visibility="hidden",document.body.appendChild(t);const n=100/t.getBoundingClientRect().width;return document.body.removeChild(t),e*n},n=e=>{const t=document.createElement("div");t.style.width="100mm",t.style.position="absolute",t.style.visibility="hidden",document.body.appendChild(t);const n=t.getBoundingClientRect().width/100;return document.body.removeChild(t),e*n},o=t(e.clientWidth),r=t(e.clientHeight),i=o<r?"portrait":"landscape";let d,s,c;"portrait"==i?(d=Math.min(210/o,297/r),s=n((210-o*d)/2),c=n((297-r*d)/2)):(d=Math.min(297/o,210/r),s=n((297-o*d)/2),c=n((210-r*d)/2));const l=document.createElement("style");return l.innerText=`@media print { @page { size: A4 ${i}; margin: 0; } #page-container { transform: scale(${d}) translate(${s}px, ${c}px); transform-origin: top left; }}`,l},o=()=>{const e=document.getElementById("page-container-wrapper")?.cloneNode(!0);if(e)return e.style=null,e.querySelectorAll('[class*="banner-wrapper"]').forEach(e=>{e&&e.remove()}),e.childNodes[0].childNodes.forEach(e=>{e.childNodes[0].style="display: block",e.childNodes[0].childNodes[0].style="display: block;"}),e;alert("Error: Clone document")};async function r(){if(!(()=>{let e=document.querySelectorAll("button");return 0===Array.from(e).filter(e=>Array.from(e.classList).some(e=>e.startsWith("PremiumBannerButton"))).length})()&&confirm('Advertisement banners are detected in this document.\nClick "OK" to remove them and refresh the page.\nClick "Cancel" if you believe all banners have been removed.'))return location.reload();if(!(()=>{let e=[];const t=document.getElementById("page-container")?.childNodes;for(const n of t)"page-content"===n?.childNodes[0]?.childNodes[0]?.className&&2!==n?.childNodes[0]?.childNodes[0]?.childNodes.length&&e.push(n);return 0===e.length})()){const n=window.scrollY;await async function(){const n=document.getElementById("page-container");if(!n)return void alert("Page container element not found");const o=Array.from(n.childNodes),r=t(o.length);for(let t=0;t<o.length;t++)try{const n=o[t].childNodes[0]?.childNodes[0];o[t].scrollIntoView({behavior:"instant",block:"start"}),r.setProgress(t+1),await e(n)}catch(i){return void alert("Error processing element:",i)}}(),await(async e=>new Promise(t=>{const n=()=>{window.scrollY===e&&(window.removeEventListener("scroll",n),t())};window.scrollTo({top:e,behavior:"smooth"}),window.addEventListener("scroll",n)}))(n)}return(async()=>{const e=(document.querySelector('link[rel="stylesheet"][href*="doc-assets"][href*=".studocu.com"]')||document.querySelector('link[as="style"][href*="doc-assets"][href*=".studocu.com"]'))?.cloneNode(!0),t=window.open("");t.document.title=document.title,t.document.head.appendChild(e),t.document.head.appendChild(n()),t.document.body.appendChild(o());const r=t.document.createElement("script");r.src=chrome.runtime.getURL("src/bundle/viewer.bundle.js"),t.document.body.appendChild(r)})()}(async()=>{r()})()}();
